<!DOCTYPE html>
<html>
<head>
<title>Dynamic Meta tags</title>
<script type='text/javascript'>
	// Generate random number between 1 and 7
	const randomImageNumber = Math.floor(Math.random() * 7) + 1;
	const imageUrl = `https://knsiexpert.github.io/site/data/assets/og/open-graph-image-meta-test-${randomImageNumber}.jpg`;
</script>
</head>
<body>
	<h1>Header1</h1>
	<h1>Header2</h1>
	<h1>Header3</h1>
	<div class="class1">
	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec interdum, urna sed dapibus lacinia, neque mauris hendrerit orci, eget elementum dui lacus vitae metus. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Nam tincidunt et ipsum ac rutrum. Nam ultricies elit in sem consectetur scelerisque. Maecenas fermentum laoreet sollicitudin. Curabitur lectus orci, lacinia in luctus sit amet, dignissim ut nibh. Nam in lorem eget tellus faucibus malesuada tempus non urna. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
	</p>
	</div>
	<p>
		<img class="class2" id="mainImage">
	</p>

<!-- dynamic meta tags -->
	<script type='text/javascript'>
		// Set image source immediately
		document.getElementById('mainImage').src = imageUrl;

		// Add meta tags as soon as DOM is loaded
		document.addEventListener('DOMContentLoaded', function() {
			// Get meta description from div.class1
			const metaMainDescription = document.querySelector('div.class1').textContent;
			const metaDescriptionTag = document.createElement('meta');
			metaDescriptionTag.name = 'description';
			metaDescriptionTag.content = metaMainDescription;
			document.head.appendChild(metaDescriptionTag);

			// Get current URL
			const metaURL = window.location.href;
			const metaURLTag = document.createElement('meta');
			metaURLTag.setAttribute('property', 'og:url');
			metaURLTag.content = metaURL;
			document.head.appendChild(metaURLTag);

			// Set og:image with random number
			const metaImageTag = document.createElement('meta');
			metaImageTag.setAttribute('property', 'og:image');
			metaImageTag.content = imageUrl;
			document.head.appendChild(metaImageTag);

			// Get title from first h1
			const metaTitle = document.querySelector('h1').textContent;
			const metaTitleTag = document.createElement('meta');
			metaTitleTag.setAttribute('property', 'og:title');
			metaTitleTag.content = metaTitle;
			document.head.appendChild(metaTitleTag);

			// Get og:description from div.class1
			const metaDescription = document.querySelector('div.class1').textContent;
			const metaDescriptionOGTag = document.createElement('meta');
			metaDescriptionOGTag.setAttribute('property', 'og:description');
			metaDescriptionOGTag.content = metaDescription;
			document.head.appendChild(metaDescriptionOGTag);
		});
	</script>
</body>
</html>